{
  "updatedAt": "2025-12-13T13:57:34.066Z",
  "createdAt": "2025-12-13T13:57:34.066Z",
  "id": "0BQZo26azYRYDQe3",
  "name": "Generate Spotlight Ad",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "spotlight-ad",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "71d29503-010a-4578-8990-4af4b3fa0ac7",
      "name": "Webhook - Spotlight Ad Request",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        32,
        160
      ],
      "webhookId": "spotlight-ad-webhook"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1kgSVMgpWVSFeAAz4M2LpNmIbuhaJKds9gnbsvLdP-t4",
          "mode": "id"
        },
        "sheetName": {
          "__rl": true,
          "value": "Spotlight_Data",
          "mode": "name"
        },
        "filtersUI": {
          "values": []
        },
        "options": {}
      },
      "id": "9bef9264-085d-4ea4-b76f-d676334764ad",
      "name": "Read Spotlight_Data Sheet",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        240,
        160
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "MmkEFg1TuHDH32HZ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Input from webhook/form\nconst searchVin = $json.vin || $json.spotlight_vin || '';\nconst searchStock = $json.stock_number || '';\n\nif (!searchVin && !searchStock) {\n  throw new Error('Must provide VIN or Stock Number for spotlight ad');\n}\n\nconsole.log(`Searching for: VIN=${searchVin} Stock=${searchStock}`);\n\n// Get data from Spotlight_Data sheet\nconst spotlightData = $('Read Spotlight_Data Sheet').all();\n\n// Find matching car\nconst car = spotlightData.find(item => {\n  const vin = (item.json.VIN || '').trim();\n  const stock = (item.json.Stock_Number || '').trim();\n  \n  if (searchVin && vin === searchVin) return true;\n  if (searchStock && stock === searchStock) return true;\n  return false;\n});\n\nif (!car) {\n  throw new Error(`Car not found in Spotlight_Data: VIN=${searchVin} Stock=${searchStock}`);\n}\n\nconsole.log(`âœ… Found: ${car.json.Year} ${car.json.Make} ${car.json.Model}`);\n\n// Parse images\nconst allImages = (car.json.All_Images || '')\n  .split('|')\n  .map(url => url.trim())\n  .filter(url => url.length > 0 && url.startsWith('https://'));\n\nif (allImages.length < 5) {\n  throw new Error(`Not enough images. Found ${allImages.length}, need at least 5 for spotlight ad.`);\n}\n\nconsole.log(`âœ… Found ${allImages.length} images for analysis`);\n\nreturn [{\n  json: {\n    ...car.json,\n    all_image_urls: allImages,\n    image_count: allImages.length,\n    vehicle_id: car.json.VIN || car.json.Stock_Number,\n    year: car.json.Year,\n    make: car.json.Make,\n    model: car.json.Model,\n    trim: car.json.Trim,\n    price: car.json.Price,\n    mileage: car.json.Mileage,\n    body_style: car.json.Body_Style,\n    transmission: car.json.Transmission,\n    drivetrain: car.json.Drivetrain,\n    exterior_color: car.json.Exterior_Color,\n    vdp_url: car.json.VDP_URL,\n    theme: $('Webhook - Spotlight Ad Request').first().json.body.theme || 'Great deal on this vehicle'\n  }\n}];"
      },
      "id": "f57151db-e134-478d-8f57-5bfbbb4ca63e",
      "name": "Lookup Car in Spotlight Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        464,
        160
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "placeholder",
              "name": "placeholder",
              "value": "={{ 'Vision selection will be implemented' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "a87eb4c6-85a0-4042-8740-98e68b5e26a8",
      "name": "PLACEHOLDER - Claude Vision Selection",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        688,
        160
      ],
      "notes": "TODO: Implement Claude Vision API call to select best 5-6 photos"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "placeholder2",
              "name": "placeholder",
              "value": "={{ 'Magic Hour will be implemented' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "7cea314c-9019-4fdc-b554-e51a885dbf52",
      "name": "PLACEHOLDER - Generate Magic Hour Intro",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        912,
        160
      ],
      "notes": "TODO: Call Magic Hour API to generate cinematic intro video"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "placeholder3",
              "name": "placeholder",
              "value": "={{ 'Script generation will be implemented' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "de23b32d-1ae9-412a-801d-278e3ffed4c6",
      "name": "PLACEHOLDER - Generate Script",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1120,
        160
      ],
      "notes": "TODO: Call Claude API to generate 30-second detailed script"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "placeholder4",
              "name": "placeholder",
              "value": "={{ 'Avatar video will be implemented' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "5ebf951b-e55d-477d-88d2-524d27f3773b",
      "name": "PLACEHOLDER - Generate Avatar Video",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1344,
        160
      ],
      "notes": "TODO: Call HeyGen API to create avatar video"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "placeholder5",
              "name": "placeholder",
              "value": "={{ 'Creatomate composition will be implemented' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "efe95cca-0c10-47ad-9bc1-797608a6a89e",
      "name": "PLACEHOLDER - Compose Video in Creatomate",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1568,
        160
      ],
      "notes": "TODO: Create new Creatomate template for spotlight format"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ {\n  \"success\": true,\n  \"message\": \"Spotlight ad workflow skeleton created\",\n  \"car\": $json.year + ' ' + $json.make + ' ' + $json.model,\n  \"images_found\": $json.image_count,\n  \"note\": \"This is a skeleton workflow - nodes will be implemented step by step\"\n} }}",
        "options": {}
      },
      "id": "15b84384-ac3f-47dc-80fd-c8782ef3cc09",
      "name": "Webhook Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        1792,
        160
      ]
    },
    {
      "parameters": {
        "content": "## ðŸ“¥ INPUT\nReceives VIN or Stock Number\nfrom web form or API call",
        "color": 4
      },
      "id": "b8957555-f282-48af-9809-65684fe07e78",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        0
      ]
    },
    {
      "parameters": {
        "content": "## ðŸ¤– AI PROCESSING\nClaude Vision selects best photos\nMagic Hour creates cinematic intro\nClaude writes detailed script",
        "width": 480,
        "color": 5
      },
      "id": "2e16ad00-e1cb-4546-8fed-3605e104af21",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        672,
        0
      ]
    },
    {
      "parameters": {
        "content": "## ðŸŽ¬ VIDEO CREATION\nHeyGen avatar speaks script\nCreatomate composes final video\nwith photos + intro + avatar",
        "width": 480,
        "color": 6
      },
      "id": "c6811b8a-07db-4045-a05c-bfe9dbad35b2",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1328,
        0
      ]
    }
  ],
  "connections": {
    "Webhook - Spotlight Ad Request": {
      "main": [
        [
          {
            "node": "Read Spotlight_Data Sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read Spotlight_Data Sheet": {
      "main": [
        [
          {
            "node": "Lookup Car in Spotlight Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Lookup Car in Spotlight Data": {
      "main": [
        [
          {
            "node": "PLACEHOLDER - Claude Vision Selection",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PLACEHOLDER - Claude Vision Selection": {
      "main": [
        [
          {
            "node": "PLACEHOLDER - Generate Magic Hour Intro",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PLACEHOLDER - Generate Magic Hour Intro": {
      "main": [
        [
          {
            "node": "PLACEHOLDER - Generate Script",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PLACEHOLDER - Generate Script": {
      "main": [
        [
          {
            "node": "PLACEHOLDER - Generate Avatar Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PLACEHOLDER - Generate Avatar Video": {
      "main": [
        [
          {
            "node": "PLACEHOLDER - Compose Video in Creatomate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PLACEHOLDER - Compose Video in Creatomate": {
      "main": [
        [
          {
            "node": "Webhook Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "staticData": null,
  "meta": null,
  "pinData": null,
  "versionId": "94f1cc7d-911a-4fff-8524-156922dcc09c",
  "activeVersionId": null,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-12-13T13:57:34.066Z",
      "createdAt": "2025-12-13T13:57:34.066Z",
      "role": "workflow:owner",
      "workflowId": "0BQZo26azYRYDQe3",
      "projectId": "VF66NQc9R74tCdyG"
    }
  ],
  "activeVersion": null,
  "tags": []
}