{
  "updatedAt": "2025-12-13T13:57:24.916Z",
  "createdAt": "2025-12-13T13:57:24.916Z",
  "id": "fx1IWJu3zqSrbYks",
  "name": "Post to Facebook - Approve & Publish",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "path": "approve-and-post",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -160,
        0
      ],
      "id": "029b109a-4197-4aee-8350-aa0ce7716656",
      "name": "Webhook",
      "webhookId": "2259f50d-5ce2-4fcf-9755-95bd0b1ebc45"
    },
    {
      "parameters": {
        "url": "={{ $json.query.video_url }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        64,
        0
      ],
      "id": "bf9a8511-5b43-4e99-8a84-7d8dc8f62bbe",
      "name": "Download video from Creatomate"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v24.0/801034506751166/videos",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $('Extract CCC Page Token').first().json.page_access_token }}"
            }
          ]
        },
        "sendBody": true,
        "contentType": "form-urlencoded",
        "bodyParameters": {
          "parameters": [
            {
              "name": "file_url",
              "value": "={{ $json.cloudinary_url }}"
            },
            {
              "name": "description",
              "value": "={{ $json.caption }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1184,
        0
      ],
      "id": "20820905-5fba-4a6b-b1ad-f6295e7a0ab0",
      "name": "Post to FB CCC page"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a4c974a2-2685-467e-9031-089b697172fc",
              "name": "cloudinary_url",
              "value": "={{ $json.secure_url }}",
              "type": "string"
            },
            {
              "id": "61b57939-fdef-44f5-8cf5-686ab12b6475",
              "name": "caption",
              "value": "={{ $('Webhook').item.json.query.caption }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        512,
        0
      ],
      "id": "237dfe01-9d4d-4da8-bf45-c4f357b114d6",
      "name": "Get secure url"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloudinary.com/v1_1/dtpqxuwby/video/upload",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            },
            {
              "name": "upload_preset",
              "value": "n8n_unsigned"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        288,
        0
      ],
      "id": "495c198d-fce3-4f88-ba64-6e4e37c76050",
      "name": "Upload to Cloudinary"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "âœ… Success! Your video has been posted to Facebook!\n\nView it here: https://www.facebook.com/profile.php?id=100064054352818\n\nYou can close this tab now.",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        1408,
        0
      ],
      "id": "76f35bb4-cd36-4130-841f-312f0a43e7b4",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "url": "https://graph.facebook.com/v24.0/me/accounts",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "EAAIlMjbhUBMBQLBx0hgFAZB3k5Vbk2vtEOZBNCDnPePTzDSmVZC1oJvZAYjZA9opvRK1rkb7fbTAGbnqmBpUossnKtpFa0WGZCWVnYTiOJpP5nZAXNN2yKSw5TPv2IIEU6OxVoIJg8Jxe7I9C9ZCSBr3qngO9f2MbzT9HxqBZBnfQZAxevzGyCw7s93hytLLn8c55emgZDZD"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        736,
        0
      ],
      "id": "9bb3a827-3c94-4bcc-b337-0cefe4e3fc1d",
      "name": "Get FB Page Tokens"
    },
    {
      "parameters": {
        "jsCode": "const response = $json;\nconst previousData = $('Get secure url').first().json; // Get the video/caption data\n\n// Find Capitol Car Credit page in the response\nconst cccPage = response.data.find(page => page.id === '801034506751166');\n\nif (!cccPage) {\n  throw new Error('Capitol Car Credit page not found in response');\n}\n\nconsole.log('Found CCC page token, tasks:', cccPage.tasks);\n\nreturn [{\n  json: {\n    ...previousData, // Pass through all the video data!\n    page_access_token: cccPage.access_token,\n    page_id: cccPage.id,\n    page_name: cccPage.name\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        960,
        0
      ],
      "id": "a5a4a6a0-e9af-42e1-8c5f-bdd0010805da",
      "name": "Extract CCC Page Token"
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Download video from Creatomate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download video from Creatomate": {
      "main": [
        [
          {
            "node": "Upload to Cloudinary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload to Cloudinary": {
      "main": [
        [
          {
            "node": "Get secure url",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get secure url": {
      "main": [
        [
          {
            "node": "Get FB Page Tokens",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to FB CCC page": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get FB Page Tokens": {
      "main": [
        [
          {
            "node": "Extract CCC Page Token",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract CCC Page Token": {
      "main": [
        [
          {
            "node": "Post to FB CCC page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false,
    "callerPolicy": "workflowsFromSameOwner"
  },
  "staticData": null,
  "meta": null,
  "pinData": null,
  "versionId": "cdaed18f-d827-4c22-a207-c80cb21ca114",
  "activeVersionId": null,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-12-13T13:57:24.916Z",
      "createdAt": "2025-12-13T13:57:24.916Z",
      "role": "workflow:owner",
      "workflowId": "fx1IWJu3zqSrbYks",
      "projectId": "VF66NQc9R74tCdyG"
    }
  ],
  "activeVersion": null,
  "tags": []
}